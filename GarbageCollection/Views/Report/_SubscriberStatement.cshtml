

@model BuisnessObject.ViewModel.MainViewModel.SubscriptionReport
@using PagedList
@using BussinessLogic.Service
@using BussinessLogic.CustomHelper
<div class="table-responsive no-padding sus-report-page-list">
    <table class="table table-bordered table-striped table-hover sus-report-table-list" style="margin-top: 20px;">

        <tr>
            <th> Suscription No.</th>

            <th>@Html.DisplayNameFor(x => x.Custname)</th>
            <th>@Html.DisplayNameFor(x => x.PostedOnAd)</th>
            <th>@Html.DisplayNameFor(x => x.PostedOnBs)</th>
            <th>@Html.DisplayNameFor(x => x.Debit)</th>
            <th>@Html.DisplayNameFor(x => x.Credit)</th>
            <th>@Html.DisplayNameFor(x => x.Balance)</th>
            <th>@Html.DisplayNameFor(x => x.Sources)</th>



        </tr>


        @foreach (var item in Model.subscriptionPagedList)
        {
           
            <tr style="font-size:12px;">
                <td>
                    @item.SubsNo

                </td>
                <td>
                    @item.Custname

                </td>
                <td>
                    @item.PostedOnAd

                </td>
                <td>
                    @item.PostedOnBs
                </td>
                <td>

                   @item.Debit

                </td>
                <td>
                    @item.Credit

                </td>
                <td>
                    @item.Balance

                </td>
                <td>@item.Balance</td>

            </tr>
                        }

    </table>
    @Html.Paging("_SuscriptionReportList", "Report", Model.subscriptionPagedList.PageCount, Model.subscriptionPagedList.PageNumber, Model.subscriptionPagedList.PageSize)

</div>



<script src="~/Scripts/SuscrptionJs/CustomerSearch.js"></script>
<link href="~/Content/PagedList.css" rel="stylesheet" />
<script src="~/Scripts/SuscrptionJs/SuscriptionPage.js"></script>




<script>
    $("div.sus-page-list").on('click', 'input.btnPaging', function (e) {
        debugger;
        e.stopImmediatePropagation();
        var parentContainer = $(this).parents()
        var me = $(this);
        var customerno = $('#CustId').val();
        var Location = parentContainer.find("#Location").find("#LocationName").val();
        var custtype = parentContainer.find("#custtype").find("#ctypeid").val()
        var effectivedate = parentContainer.find("#effectivedate").find("#EffectiveDate").val();
        var status = parentContainer.find("#status").find("#statuslist").val();
        var container = parentContainer.find("div.sus-page-list")
        var url = "?customerId=" + customerno + "&custtype=" + custtype + "&effectivedate=" + effectivedate + "&Location=" + Location + "&status=" + status;
        getPageNumberBtnAction(url, container, me)

    });
    $("div.sus-page-list").on('change', 'input#pageNo', function (e) {
        e.stopImmediatePropagation();
        debugger;
        var parentContainer = $(this).parents()
        var me = $(this);
        var customerno = $('#CustId').val();
        var Location = parentContainer.find("#Location").find("#LocationName").val();
        var custtype = parentContainer.find("#custtype").find("#ctypeid").val()
        var effectivedate = parentContainer.find("#effectivedate").find("#EffectiveDate").val();
        var status = parentContainer.find("#status").find("#statuslist").val();
        var container = parentContainer.find("div.sus-page-list")
        var url = "?customerId=" + customerno + "&custtype=" + custtype + "&effectivedate=" + effectivedate + "&Location=" + Location + "&status=" + status;
        getPageNumberChangeData(url, container, me)
    });
    $("div.sus-page-list").on('change', 'input#pageSize', function (e) {
        e.stopImmediatePropagation();
        debugger;
        var parentContainer = $(this).parents()

        var me = $(this);
        var customerno = $('#CustId').val();
        var Location = parentContainer.find("#Location").find("#LocationName").val();
        var custtype = parentContainer.find("#custtype").find("#ctypeid").val()
        var effectivedate = parentContainer.find("#effectivedate").find("#EffectiveDate").val();
        var status = parentContainer.find("#status").find("#statuslist").val();
        var container = parentContainer.find("div.sus-page-list")
        var url = "?customerId=" + customerno + "&custtype=" + custtype + "&effectivedate=" + effectivedate + "&Location=" + Location + "&status=" + status;
        getPageSizeChangeData(url, container, me)
    });

</script>